include(ExternalProject)

ExternalProject_Add(
    SDL2_project

    URL "https://www.libsdl.org/release/SDL2-2.0.8.tar.gz"

    SOURCE_DIR "${GLOBAL_OUTPUT_PATH}/3rdparty/SDL2"
    CMAKE_ARGS -DCMAKE_INSTALL_PREFIX=${GLOBAL_OUTPUT_PATH}/3rdparty_build/
    )

ExternalProject_Add(
    SDL2_image_project

    URL "https://www.libsdl.org/projects/SDL_image/release/SDL2_image-2.0.3.tar.gz"

    SOURCE_DIR "${GLOBAL_OUTPUT_PATH}/3rdparty/SDL2_image"

    CONFIGURE_COMMAND ${GLOBAL_OUTPUT_PATH}/3rdparty/SDL2_image/configure --prefix=${GLOBAL_OUTPUT_PATH}/3rdparty_build/
    PREFIX ${GLOBAL_OUTPUT_PATH}/3rdparty_build/
    BUILD_COMMAND make
    BUILD_IN_SOURCE 1
    INSTALL_COMMAND make install
    )

set(SDL2_INCLUDE_DIR "${GLOBAL_OUTPUT_PATH}/3rdparty_build/include")
set(SDL2_LIBRARIES_DIR "${GLOBAL_OUTPUT_PATH}/3rdparty_build/lib")
set(SDL2_LIBRARIES SDL2 SDL2main SDL2_image)

add_dependencies(SDL2_image_project SDL2_project)

ExternalProject_Add(
    g3log_project

    GIT_REPOSITORY "https://github.com/KjellKod/g3log.git"
    GIT_TAG "master"

    SOURCE_DIR "${GLOBAL_OUTPUT_PATH}/3rdparty/g3log"
    CMAKE_ARGS -DCMAKE_INSTALL_PREFIX=${GLOBAL_OUTPUT_PATH}/3rdparty_build/ -DUSE_DYNAMIC_LOGGING_LEVELS=ON
    )

set(g3log_INCLUDE_DIR "${GLOBAL_OUTPUT_PATH}/3rdparty_build/include")
set(g3log_LIBRARIES_DIR "${GLOBAL_OUTPUT_PATH}/3rdparty_build/lib")
set(g3log_LIBRARIES g3logger pthread)

set(THIRDPARTY_INCLUDE_PATHS ${SDL2_INCLUDE_DIR} ${g3log_INCLUDE_DIR})
set(THIRDPARTY_LIBRARIES_PATHS ${SDL2_LIBRARIES_DIR} ${g3log_LIBRARIES_DIR})
set(THIRDPARTY_LIBRARIES ${SDL2_LIBRARIES} ${g3log_LIBRARIES})
set(THIRDPARTY_DEPENDENCIES SDL2_project SDL2_image_project g3log_project)
